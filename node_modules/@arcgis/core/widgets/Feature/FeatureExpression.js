/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
import{_ as e}from"../../chunks/tslib.es6.js";import{init as t}from"../../core/watchUtils.js";import{property as o}from"../../core/accessorSupport/decorators/property.js";import"../../core/arrayUtils.js";import"../../core/has.js";import"../../core/accessorSupport/ensureType.js";import{subclass as r}from"../../core/accessorSupport/decorators/subclass.js";import i from"../Widget.js";import s from"./FeatureContent.js";import n from"./FeatureFields.js";import d from"./FeatureMedia.js";import a from"./FeatureExpression/FeatureExpressionViewModel.js";import"../support/widgetUtils.js";import"../../core/Logger.js";import{tsx as l}from"../support/jsxFactory.js";const p={iconLoading:"esri-icon-loading-indicator esri-rotating",base:"esri-feature-expression",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"};let c=class extends i{constructor(e,t){super(e,t),this.viewModel=new a}initialize(){t(this,"viewModel.contentElementViewModel",(()=>this._setupExpressionWidget()))}destroy(){var e;null==(e=this._contentWidget)||e.destroy(),this._contentWidget=null}renderLoading(){return l("div",{key:"loading-container",class:p.loadingSpinnerContainer},l("span",{class:this.classes(p.iconLoading,p.spinner)}))}render(){var e;const{state:t}=this.viewModel;return l("div",{class:p.base},"loading"===t?this.renderLoading():"disabled"===t?null:null==(e=this._contentWidget)?void 0:e.render())}_setupExpressionWidget(){var e;const{contentElementViewModel:t,contentElement:o}=this.viewModel,r=null==o?void 0:o.type;null==(e=this._contentWidget)||e.destroy(),this._contentWidget=null;const i=t?"fields"===r?new n({viewModel:t}):"media"===r?new d({viewModel:t}):"text"===r?new s({viewModel:t}):null:null;this._contentWidget=i,this.scheduleRender()}};e([o({type:a})],c.prototype,"viewModel",void 0),c=e([r("esri.widgets.Feature.FeatureExpression")],c);const u=c;export{u as default};
