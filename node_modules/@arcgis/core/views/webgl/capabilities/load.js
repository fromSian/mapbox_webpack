/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
import{createDisjointTimerQuery as t}from"./DisjointTimerQuery.js";import{load as e}from"./DrawBuffers.js";import{load as r}from"./Instancing.js";import _ from"./isWebGL2Context.js";import{load as n}from"./LoseContext.js";import{load as o}from"./VertexArrayObjects.js";function E(_,E){const s=E.disabledExtensions||{},x=E.debugWebGLExtensions||{};let C,G,A,O,F,B,M,c,D,X,d,g,P=null,L=null,H=null,p=null;return{get drawBuffers(){return d||(d=e(_,s)),d},get instancing(){return C||(C=r(_)),C},get vao(){return G||(G=o(_,s)),G},get compressedTextureETC(){return A||(A=l(_,s)),A},get compressedTextureS3TC(){return O||(O=u(_,s)),O},get textureFilterAnisotropic(){return F||(F=i(_,s)),F},get disjointTimerQuery(){return B||(B=t(_,s)),B},get textureFloat(){return M||(M=a(_,s)),M},get colorBufferFloat(){return c||(c=S(_,s)),c},get blendMinMax(){return D||(D=R(_,s)),D},get depthTexture(){return null===P&&(P=f(_,s,"depthTexture",!0,["WEBGL_depth_texture","MOZ_WEBGL_depth_texture","WEBKIT_WEBGL_depth_texture"])),P},get standardDerivatives(){return null===L&&(L=f(_,s,"standardDerivatives",!0,["OES_standard_derivatives"])),L},get shaderTextureLOD(){return null===H&&(H=f(_,s,"shaderTextureLOD",!0,["EXT_shader_texture_lod"])),H},get fragDepth(){return null===p&&(p=f(_,s,"fragDepth",!0,["EXT_frag_depth"])),p},get loseContext(){return X||(X=n(_,x)),X},get textureNorm16(){return g||(g=T(_,s)),g},enable(t){return this[t]}}}function l(t,e){if(e.compressedTextureETC)return null;const r=t.getExtension("WEBGL_compressed_texture_etc");return r?{COMPRESSED_R11_EAC:r.COMPRESSED_R11_EAC,COMPRESSED_SIGNED_R11_EAC:r.COMPRESSED_SIGNED_R11_EAC,COMPRESSED_RG11_EAC:r.COMPRESSED_RG11_EAC,COMPRESSED_SIGNED_RG11_EAC:r.COMPRESSED_SIGNED_RG11_EAC,COMPRESSED_RGB8_ETC2:r.COMPRESSED_RGB8_ETC2,COMPRESSED_SRGB8_ETC2:r.COMPRESSED_SRGB8_ETC2,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:r.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:r.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,COMPRESSED_RGBA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC}:null}function u(t,e){if(e.compressedTextureS3TC)return null;const r=t.getExtension("WEBGL_compressed_texture_s3tc");return r?{COMPRESSED_RGB_S3TC_DXT1:r.COMPRESSED_RGB_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT1:r.COMPRESSED_RGBA_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT3:r.COMPRESSED_RGBA_S3TC_DXT3_EXT,COMPRESSED_RGBA_S3TC_DXT5:r.COMPRESSED_RGBA_S3TC_DXT5_EXT}:null}function R(t,e){if(_(t))return{MIN:t.MIN,MAX:t.MAX};if(e.blendMinMax)return null;{const e=t.getExtension("EXT_blend_minmax");return e?{MIN:e.MIN_EXT,MAX:e.MAX_EXT}:null}}function i(t,e){if(e.textureFilterAnisotropic)return null;const r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");return r?{MAX_TEXTURE_MAX_ANISOTROPY:r.MAX_TEXTURE_MAX_ANISOTROPY_EXT,TEXTURE_MAX_ANISOTROPY:r.TEXTURE_MAX_ANISOTROPY_EXT}:null}function a(t,e){if(_(t))return{textureFloat:!0,textureFloatLinear:!e.textureFloatLinear&&!!t.getExtension("OES_texture_float_linear"),textureHalfFloat:!0,textureHalfFloatLinear:!e.textureHalfFloatLinear&&!!t.getExtension("OES_texture_half_float_linear"),HALF_FLOAT:t.HALF_FLOAT};if(t instanceof WebGLRenderingContext){const r=!e.textureHalfFloat&&t.getExtension("OES_texture_half_float");return{textureFloat:!e.textureFloat&&!!t.getExtension("OES_texture_float"),textureFloatLinear:!e.textureFloatLinear&&!!t.getExtension("OES_texture_float_linear"),textureHalfFloat:!!r,textureHalfFloatLinear:!e.textureHalfFloatLinear&&!!t.getExtension("OES_texture_half_float_linear"),HALF_FLOAT:r?r.HALF_FLOAT_OES:void 0}}return null}function S(t,e){if(_(t)){const r=!e.colorBufferFloat&&t.getExtension("EXT_color_buffer_half_float"),_=!e.colorBufferFloat&&t.getExtension("EXT_color_buffer_float"),n=!e.colorBufferFloat&&t.getExtension("EXT_float_blend");return r||_||n?{textureFloat:!!_,textureHalfFloat:!!r,floatBlend:!!n,R16F:t.R16F,RG16F:t.RG16F,RGBA16F:t.RGBA16F,R32F:t.R32F,RG32F:t.RG32F,RGBA32F:t.RGBA32F,R11F_G11F_B10F:t.R11F_G11F_B10F,RGB16F:t.RGB16F}:null}if(t instanceof WebGLRenderingContext){const r=!e.colorBufferFloat&&t.getExtension("EXT_color_buffer_half_float"),_=!e.colorBufferFloat&&t.getExtension("WEBGL_color_buffer_float"),n=!e.colorBufferFloat&&t.getExtension("EXT_float_blend");return r||_||n?{textureFloat:!!_,textureHalfFloat:!!r,floatBlend:!!n,RGBA16F:r?r.RGBA16F_EXT:void 0,RGB16F:r?r.RGB16F_EXT:void 0,RGBA32F:_?_.RGBA32F_EXT:void 0}:null}return null}function f(t,e,r,n,o){if(n&&_(t))return!0;if(e[r])return!1;for(const _ of o)if(t.getExtension(_))return!0;return!1}function T(t,e){if(!_(t))return null;if(e.textureNorm16)return null;const r=t.getExtension("EXT_texture_norm16");return r?{R16:r.R16,RG16:r.RG16,RGB16:r.RGB16,RGBA16:r.RGBA16,R16_SNORM:r.R16_SNORM,RG16_SNORM:r.RG16_SNORM,RGB16_SNORM:r.RGB16_SNORM,RGBA16_SNORM:r.RGBA16_SNORM}:null}export{E as loadCapabilities};
