/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
import{_ as a}from"../../../../chunks/tslib.es6.js";import s from"../../../../core/Accessor.js";import{destroyMaybe as t,isSome as e,unwrapOr as i}from"../../../../core/maybe.js";import{property as r}from"../../../../core/accessorSupport/decorators/property.js";import"../../../../core/arrayUtils.js";import"../../../../core/has.js";import"../../../../core/accessorSupport/ensureType.js";import{subclass as o}from"../../../../core/accessorSupport/decorators/subclass.js";import{defaultUnitPropertyMetadata as n}from"../../../../properties/defaultUnit.js";import{AnalysisView3D as l}from"../AnalysisView3D.js";import{AreaMeasurementController as p}from"./support/AreaMeasurementController.js";import{AreaMeasurementView3DData as u}from"./support/AreaMeasurementView3DData.js";import{AreaMeasurementVisualization as y}from"./support/AreaMeasurementVisualization.js";let h=class extends(l(s)){constructor(a){super(a),this.type="area-measurement-view-3d",this.analysisViewData=new u}initialize(){this.analysisViewData.path.view=this.view,this.analysisViewData.path.areaMeasurement=this.analysis,this.analysisVisualization=new y({view:this.view,analysis:this.analysis,analysisView:this}),this.analysisController=new p({view:this.view,analysis:this.analysis,analysisViewData:this.analysisViewData})}destroy(){this.analysisController=t(this.analysisController),this.analysisVisualization=t(this.analysisVisualization),this.analysisViewData=t(this.analysisViewData)}get updating(){var a;return!(null==(a=this.analysisVisualization)||!a.loadingMessages)}get result(){const a=this.analysisViewData.measurementData;return e(a)?"euclidean"===a.actualMeasurementMode?{area:a.area,pathLength:a.perimeterLength,mode:"euclidian"}:{area:a.geodesicArea,pathLength:a.pathLength,mode:"geodesic"}:{area:null,mode:null,pathLength:null}}get unit(){return i(this.analysis.unit,this._defaultUnit)}get testData(){return{visualization:this.analysisVisualization,controller:this.analysisController}}};a([r()],h.prototype,"type",void 0),a([r()],h.prototype,"analysis",void 0),a([r()],h.prototype,"updating",null),a([r()],h.prototype,"analysisVisualization",void 0),a([r()],h.prototype,"analysisController",void 0),a([r()],h.prototype,"result",null),a([r()],h.prototype,"analysisViewData",void 0),a([r()],h.prototype,"unit",null),a([r(n)],h.prototype,"_defaultUnit",void 0),h=a([o("esri.views.3d.analysis.AreaMeasurement.AreaMeasurementView3D")],h);const m=h;export{m as default};
