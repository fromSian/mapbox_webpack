/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
import{_ as e}from"../chunks/tslib.es6.js";import t from"./Analysis.js";import s from"../core/Collection.js";import{castForReferenceSetter as o,referenceSetter as r}from"../core/collectionUtils.js";import{clone as l}from"../core/lang.js";import i from"../core/Logger.js";import{isNone as a,isSome as n}from"../core/maybe.js";import{property as p}from"../core/accessorSupport/decorators/property.js";import"../core/accessorSupport/ensureType.js";import{subclass as c}from"../core/accessorSupport/decorators/subclass.js";import{renderSRFromViewSR as d}from"../geometry/support/coordinateSystem.js";import{shapeToExtent as u}from"../views/3d/interactive/analysisTools/slice/sliceToolUtils.js";import{RenderCoordsHelper as y}from"../views/3d/support/RenderCoordsHelper.js";import{isSpatialReferenceSupported as h}from"../views/support/spatialReferenceSupport.js";import m from"../widgets/Slice/SlicePlane.js";var f;const x=i.getLogger("esri.analysis.Slice");let b=f=class extends t{constructor(e){super(e),this.type="slice",this.tiltEnabled=!1,this.shape=null,this.excludeGroundSurface=!1}get extent(){if(a(this.shape)||a(this.shape.position))return null;const e=this.shape.position.spatialReference;let t=null,s=null;if(h(e,2)){const s=y.create(2,d(!1,e));t=u(this.shape,s,{tiltEnabled:this.tiltEnabled})}if(h(e,1)){const t=y.create(1,d(!0,e));s=u(this.shape,t,{tiltEnabled:this.tiltEnabled})}return n(t)&&n(s)?t.union(s):a(t)&&a(s)?(x.warnOnce(`Extent of slice analysis (title: '${null!=(o=this.title)?o:"no title"}', id: '${null!=(r=this.id)?r:"no id"}') could not be computed as the spatial reference of the shape (wkid: '${null!=(l=e.wkid)?l:"no wkid"}') is not supported by the view`),null):a(t)?s:t;var o,r,l}clone(){return new f({tiltEnabled:this.tiltEnabled,shape:l(this.shape),excludedLayers:this.excludedLayers.slice(),excludeGroundSurface:this.excludeGroundSurface,...this.cloneBaseAnalysisProperties()})}get excludedLayers(){return this._get("excludedLayers")||new s}set excludedLayers(e){this._set("excludedLayers",r(e,this._get("excludedLayers")))}};e([p({readOnly:!0})],b.prototype,"type",void 0),e([p({readOnly:!0})],b.prototype,"extent",null),e([p()],b.prototype,"tiltEnabled",void 0),e([p({types:{key:"type",base:null,typeMap:{plane:m},defaultKeyValue:"plane"}})],b.prototype,"shape",void 0),e([p({cast:o})],b.prototype,"excludedLayers",null),e([p({type:Boolean,nonNullable:!0})],b.prototype,"excludeGroundSurface",void 0),b=f=e([c("esri.analysis.Slice")],b);const j=b;export{j as default};
